# Problem 3
After automation with prob1 and prob2, our life is easier now. This time, we are told that the `/app/SRV_CONFIG` config file generated by our service, `toy-srv`, is actually something to be consumed by other system components. 
Fortunately, this time the tool is pre-deployed by other teams. We can find the program we need in `/app/register-config`. The feature team instructs you that running this program can register your service's config to another remote component.

For you, the remaining job is pretty simple. Write an Ansible playbook:
- Execute the program `/app/register-config` on all servers
- Report the result (stdout/stderr) with proper error-handling

Wait! Problem 3 can't be this simple! So, the infra team comes in and add two more servers for you.
You need:
- Run `prep_env_p3_part2` and confirm 2 more servers are added; 5 servers in totall.
- Run the playbook again to make sure all 5 servers are registered their config remotely


# Prepare your env
```
# Reset to initial state
$ prep_env_p3_<arch>

# When you finish the job on the first 3 servers, run the following to get the extra 2 servers
$ prep_env_p3_part2_<arch>
```

# Submission
- Submit your playbook yaml and name it as `prob3_playbook.yaml`
- Run your playbook `ansible-playbook <path_to>/prob3_playbook.yaml` with two stages:

    ```
    # Get the first 3 servers
    $ prep_env_p3_<arch>
    $ ansible-playbook -v <path_to>/prob3_playbook.yaml > prob3_part1.txt

    # Now scale up to 5 servers
    $ prep_env_p3_part2_<arch>
    
    # Check your inventory has 5 servers
    $ ansible-inventory --graph

    # Get the result for the part2
    $ ansible-playbook -v <path_to>/prob3_playbook.yaml > prob3_part2.txt
    ```
- Make sure the .txt files are generated with verbose flag `-v`
- Submit a plaintext file `reasoning.txt` to briefly explain your playbook:
    - If you use some non-default parameters, why?
    - Any trouble when you do this task? If so, how did you address them?

# Hint
- How to design playbook considering the size of the cluster could change anytime?
- If you encounter troubles, you are empowered to use the knowledge you learned from prob1 and prob2
